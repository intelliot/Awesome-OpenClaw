We have openclaw running as an active systemd service. There is no need to use screen.
                                                                                                                                                                                                                                                              
 1. You have a working user systemd instance (systemd --user) running.                                                                                                                                                                                        
 2. openclaw-gateway.service is installed under ~/.config/systemd/user/.                                                                                                                                                                                      
 3. The unit has a valid ExecStart, PATH, restart policy, and env.                                                                                                                                                                                            
 4. The service is enabled and managed by systemd (auto-restart, logs, lifecycle).                                                                                                                                                                            
 5. In this setup, screen/tmux are unnecessary because systemd is already your process supervisor.                                                                                                                                                            
                                                                                                                                                                                                                                                              
If it fails in another LXC, it's likely because:
 - user systemd not started / broken in container                                                                                                                                                                                                             
 - no lingering user session                                                                                                                                                                                                                                  
 - bad PATH/Node in unit                                                                                                                                                                                                                                      
 - unit not enabled or not reload/restarted                                                                                                                                                                                                                   
 - Proxmox/LXC config limiting user services                                                                                                                                                                                                                  

## Copy/paste prompt to diagnose + fix
                                                                                                                                                                                                                                                              
 Ask them to paste this exactly into their OpenClaw assistant:                                                                                                                                                                                                
                                                                                                                                                                                                                                                              
 ```text                                                                                                                                                                                                                                                      
   Iâ€™m running OpenClaw from source in a Proxmox LXC and want a robust systemd-user setup (prefer systemd over screen/tmux). Please do a full read-only diagnosis first, then apply fixes with commands and explanations.                                     
                                                                                                                                                                                                                                                              
   Requirements:                                                                                                                                                                                                                                              
   - Use source workflow (`pnpm openclaw ...`), not global binary assumptions.                                                                                                                                                                                
   - Prefer systemd user service if viable.                                                                                                                                                                                                                   
   - Do not change any group policy or control-ui insecure flags.
                                                                                                                                                                                                                                                              
   Please run and report outputs for:                                                                                                                                                                                                                         
   1) Runtime + tools:                                                                                                                                                                                                                                        
   - whoami                                                                                                                                                                                                                                                   
   - uname -a                                                                                                                                                                                                                                                 
   - cat /etc/os-release                                                                                                                                                                                                                                      
   - node -v                                                                                                                                                                                                                                                  
   - corepack --version                                                                                                                                                                                                                                       
   - pnpm -v                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                              
   2) systemd viability checks:                                                                                                                                                                                                                               
   - ps -ef | grep -E "systemd --user|openclaw-gateway" | grep -v grep                                                                                                                                                                                        
   - systemctl --user is-system-running                                                                                                                                                                                                                       
   - systemctl --user status openclaw-gateway --no-pager -n 50                                                                                                                                                                                                
   - loginctl show-user $(whoami) | grep -E "Linger|State" || true                                                                                                                                                                                            
                                                                                                                                                                                                                                                              
   3) OpenClaw repo + build:                                                                                                                                                                                                                                  
   - cd /opt/openclaw                                                                                                                                                                                                                                         
   - git status --short --branch                                                                                                                                                                                                                              
   - git rev-parse --short HEAD                                                                                                                                                                                                                               
   - pnpm install --frozen-lockfile                                                                                                                                                                                                                           
   - pnpm build                                                                                                                                                                                                                                               
   - pnpm ui:build                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                              
   4) Config/security checks:                                                                                                                                                                                                                                 
   - show gateway.auth + gateway.bind from ~/.openclaw/openclaw.json                                                                                                                                                                                          
   - ensure gateway.auth.rateLimit exists:                                                                                                                                                                                                                    
   { "maxAttempts": 10, "windowMs": 60000, "lockoutMs": 300000 }                                                                                                                                                                                              
   - chmod 700 ~/.openclaw/credentials                                                                                                                                                                                                                        
   - pnpm openclaw doctor                                                                                                                                                                                                                                     
   - pnpm openclaw security audit --deep                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                              
   Then implement best-practice systemd-user service:                                                                                                                                                                                                         
   - Ensure unit at ~/.config/systemd/user/openclaw-gateway.service with:                                                                                                                                                                                     
   - ExecStart using explicit Node path + /opt/openclaw/dist/index.js gateway --port 18789                                                                                                                                                                    
   - Restart=always, RestartSec=5                                                                                                                                                                                                                             
   - HOME and PATH env set correctly                                                                                                                                                                                                                          
   - OPENCLAW_GATEWAY_PORT and OPENCLAW_GATEWAY_TOKEN env                                                                                                                                                                                                     
   - OPENCLAW_SERVICE_VERSION matching /opt/openclaw/package.json version                                                                                                                                                                                     
   - Run:                                                                                                                                                                                                                                                     
   - systemctl --user daemon-reload                                                                                                                                                                                                                           
   - systemctl --user enable --now openclaw-gateway                                                                                                                                                                                                           
   - systemctl --user restart openclaw-gateway                                                                                                                                                                                                                
   - systemctl --user is-active openclaw-gateway                                                                                                                                                                                                              
   - systemctl --user status openclaw-gateway --no-pager -n 50                                                                                                                                                                                                
                                                                                                                                                                                                                                                              
   If systemd-user fails in this LXC:                                                                                                                                                                                                                         
   - Explain exact failure reason.
```
